{
  "name": "ChatService",
  "endpoints": [
    { "urn": "urn:websocket/", "url": "/ws",  "active": false },

    { "urn": "urn:message/", "url": "/message"},
    { "urn": "urn:event-stream/", "url": "/es/:channel" }
  ],
  "services": [
    { "urn": "urn:service/ws", "url": "/private/ws.js", "active": false },

    { "urn": "urn:service/message", "url": "/private/message.js" },
    { "urn": "urn:service/event-stream", "url": "/private/es.js" },

    { "urn": "urn:service/log", "url": "/private/log.js" }
  ],
  "bindings": [
    { "from": "urn:websocket/", "to": "urn:service/message", "active": false },
    { "from": "urn:storage/create", "to": "urn:service/ws", "active": false },

    { "from": "urn:message/", "to": "urn:service/message" },
    { "from": "urn:event-stream/", "to": "urn:service/event-stream" },

    { "from": "*", "to": "urn:service/log" }
  ],
  "scripts": [
    { "url": "/private/message.js", "src": "port.on('message', m => Storage.create('urn:storage/local', m))" }
  ],
  "gateways": [
    { "urn": "urn:gateway/local", "url": "mqtt:local-mqtt/" }
  ],
  "stores": [
    { "urn": "urn:storage/local", "url": "/data" }
  ]
}